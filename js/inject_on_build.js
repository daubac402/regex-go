!function(){"use strict";var a=function(){this.init()},b=a.prototype={};b._ctaAnimation=null,b.docView=null,b.libView=null,b.init=function(){if(dan.isSupported()){BrowserHistory.init(),BrowserHistory.on("change",this.handleHistoryChange,this),ZeroClipboard.config({moviePath:"assets/ZeroClipboard.swf",debug:!1,useNoCache:!1,forceHandCursor:!0}),List.spinner=dan.el(".spinner");var a=new DocView(dan.el("#docview"));this.docView=a;var b=dan.el("#docview .default");DocView.DEFAULT_TEXT=(b.textContent||b.innerText).trim().replace("{{ctrl}}",Utils.getCtrlKey().toLowerCase()),a.setText(),dan.defer(a,a.setText),b.style.display="none",DocView.DEFAULT_EXPRESSION="//g";var c=dan.el("#cheatsheet");c.style.display="none",Docs.getItem("cheatsheet").desc=c.innerHTML,a.setExpression(DocView.DEFAULT_EXPRESSION).setSubstitution(DocView.DEFAULT_SUBSTITUTION),a.resetHistory();var d=new LibView(dan.el("#libview"),Docs.content.library);this.libView=d,d.docView=a,a.libView=d,ExpressionModel.docView=a,ExpressionModel.saveState(),Settings.trackVisit(),Settings.cleanSaveTokens(),this.navigate()}},b.handleHistoryChange=function(){this.navigate()},b.navigate=function(){var a=document.location.toString(),b=/[\/#\?]([\w\d]+)$/gi.exec(a),c=null;if(b&&(c=b[1]),ExpressionModel.id!=dan.idToNumber(c)+"")if(dan.isIDValid(c)){var d=this;ServerModel.getPatternByID(c).then(function(a){ExpressionModel.setLastSave(a);var b=dan.parsePattern(a.pattern);d.docView.populateAll(b.ex,b.flags,a.content,a.replace)},function(){BrowserHistory.go()})}else BrowserHistory.go()},b.showVideo=function(a){var b=null,c=dan.el(".video");a!==!1?(dan.removeClass(c,"hidden"),c.addEventListener("click",this.handleVideoCloseProxy),b="playVideo",this._ctaAnimation.stop=!0):(dan.addClass(c,"hidden"),c.removeEventListener("click",this.handleVideoCloseProxy),b="pauseVideo");var d=dan.el(".video iframe").contentWindow;d.postMessage('{"event":"command","func":"'+b+'","args":""}',"*")},b.handleVideoClick=function(){this.showVideo(!1)},window.RegExr=a}(),WebFont.load({google:{families:["Source Code Pro:400,700","Cabin:400,700"],fontinactive:function(){WebFont.load({custom:{families:["Source Code Pro:400,700","Cabin:400,700"],urls:["css/fontFallback.css"]}})}},active:function(){window.regexr=new window.RegExr}});